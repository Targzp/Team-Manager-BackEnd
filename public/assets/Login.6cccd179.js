import{_ as e}from"./index.605a31b6.js";import{r as s,o,c as t,d as r,e as a,w as u,f as l}from"./vendor.b1d65a4d.js";import{N as i}from"./Button.e5f3fabf.js";const n={"./404.vue":()=>e((()=>import("./404.8f7787af.js")),["assets/404.8f7787af.js","assets/404.e12853c1.css","assets/vendor.b1d65a4d.js","assets/Button.e5f3fabf.js"]),"./Approve.vue":()=>e((()=>import("./Approve.d3ab931a.js")),["assets/Approve.d3ab931a.js","assets/Approve.1989dda8.css","assets/vendor.b1d65a4d.js","assets/index.605a31b6.js","assets/index.b0e8d3f8.css","assets/zh-cn.a582dec9.js"]),"./Dept.vue":()=>e((()=>import("./Dept.d6b38560.js")),["assets/Dept.d6b38560.js","assets/vendor.b1d65a4d.js"]),"./Leave.vue":()=>e((()=>import("./Leave.9ca985e9.js")),["assets/Leave.9ca985e9.js","assets/Approve.1989dda8.css","assets/vendor.b1d65a4d.js","assets/index.605a31b6.js","assets/index.b0e8d3f8.css","assets/zh-cn.a582dec9.js"]),"./Menu.vue":()=>e((()=>import("./Menu.1934a4fe.js")),["assets/Menu.1934a4fe.js","assets/Menu.0c2d3fb5.css","assets/vendor.b1d65a4d.js"]),"./Role.vue":()=>e((()=>import("./Role.43455130.js")),["assets/Role.43455130.js","assets/index.605a31b6.js","assets/index.b0e8d3f8.css","assets/vendor.b1d65a4d.js"]),"./User.vue":()=>e((()=>import("./User.a4db6a7f.js")),["assets/User.a4db6a7f.js","assets/vendor.b1d65a4d.js","assets/index.605a31b6.js","assets/index.b0e8d3f8.css"]),"./Welcome.vue":()=>e((()=>import("./Welcome.eb10983e.js")),["assets/Welcome.eb10983e.js","assets/Welcome.d4a07ff2.css","assets/vendor.b1d65a4d.js"])},m={name:"login",data:()=>({user:{userName:"",userPwd:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],userPwd:[{required:!0,message:"请输入密码",trigger:"blur"}]}}),components:{NButton:i},methods:{handleLoginClick(){this.$refs.userForm.validate((async e=>{if(e){const e=await this.$api.login(this.user);e.userId&&(this.$store.commit("saveUserInfo",e),await this.loadAsyncRoutes(),this.$router.push("/welcome"))}}))},async loadAsyncRoutes(){if((this.$storage.getItem("userInfo")||{}).token)try{const{menuList:e}=await this.$api.getPermissionList();this.$utils.generateRoute(e).map((e=>{let s=`./${e.component}.vue`;e.component=n[s],this.$router.addRoute("Home",e)}))}catch(e){console.log(e)}}}},d={class:"login-wrapper"},_={class:"model"},p=r("div",{class:"title"},"Manager",-1),c=l("登录"),f=l("注册");m.render=function(e,l,i,n,m,g){const v=s("el-input"),h=s("el-form-item"),E=s("n-button"),L=s("el-form");return o(),t("div",d,[r("div",_,[a(L,{ref:"userForm",model:m.user,"status-icon":"",rules:m.rules},{default:u((()=>[p,a(h,{prop:"userName"},{default:u((()=>[a(v,{type:"text","prefix-icon":"el-icon-user",modelValue:m.user.userName,"onUpdate:modelValue":l[0]||(l[0]=e=>m.user.userName=e)},null,8,["modelValue"])])),_:1}),a(h,{prop:"userPwd"},{default:u((()=>[a(v,{type:"password","prefix-icon":"el-icon-lock",modelValue:m.user.userPwd,"onUpdate:modelValue":l[1]||(l[1]=e=>m.user.userPwd=e)},null,8,["modelValue"])])),_:1}),a(h,null,{default:u((()=>[a(E,{type:"info",class:"btn-login",size:"large",onClick:g.handleLoginClick},{default:u((()=>[c])),_:1},8,["onClick"])])),_:1}),a(h,null,{default:u((()=>[a(E,{type:"info",class:"btn-register",size:"large",ghost:""},{default:u((()=>[f])),_:1})])),_:1})])),_:1},8,["model","rules"])])])};export{m as default};
